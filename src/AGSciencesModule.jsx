import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { useLanguage } from './LanguageContext';
import { useCart } from './CartContext';
import audioSystem from './audioSystem';

const AGSciencesModule = () => {
  const { language } = useLanguage();
  const { addToCart } = useCart();
  const navigate = useNavigate();
  const [selectedCategory, setSelectedCategory] = useState(null);
  const [selectedProduct, setSelectedProduct] = useState(null);
  const [uploadedFile, setUploadedFile] = useState(null);

  const agCategories = [
    { id: 'vegetables', name: 'Vegetables', nameEs: 'Vegetales', icon: '🥬', color: '#10b981', products: ['Lettuce', 'Romaine Lettuce', 'Iceberg Lettuce', 'Butterhead Lettuce', 'Oak Leaf Lettuce', 'Red Leaf Lettuce', 'Green Leaf Lettuce', 'Spinach', 'Baby Spinach', 'Mature Spinach', 'Kale', 'Curly Kale', 'Lacinato Kale', 'Red Kale', 'Dinosaur Kale', 'Arugula', 'Baby Arugula', 'Wild Arugula', 'Cabbage', 'Green Cabbage', 'Red Cabbage', 'Purple Cabbage', 'Napa Cabbage', 'Savoy Cabbage', 'Bok Choy', 'Baby Bok Choy', 'Broccoli', 'Broccoli Crowns', 'Broccolini', 'Broccoli Rabe', 'Cauliflower', 'White Cauliflower', 'Orange Cauliflower', 'Purple Cauliflower', 'Romanesco', 'Brussels Sprouts', 'Baby Brussels Sprouts', 'Tomatoes', 'Beefsteak Tomatoes', 'Roma Tomatoes', 'Plum Tomatoes', 'Cherry Tomatoes', 'Grape Tomatoes', 'Heirloom Tomatoes', 'Sun-Dried Tomatoes', 'Green Tomatoes', 'Yellow Tomatoes', 'Bell Peppers', 'Red Bell Peppers', 'Yellow Bell Peppers', 'Orange Bell Peppers', 'Green Bell Peppers', 'Purple Bell Peppers', 'Hot Peppers', 'Jalapeños', 'Serrano Peppers', 'Habanero Peppers', 'Ghost Peppers', 'Carolina Reaper', 'Poblano Peppers', 'Anaheim Peppers', 'Banana Peppers', 'Pepperoncini', 'Cucumbers', 'English Cucumbers', 'Persian Cucumbers', 'Kirby Cucumbers', 'Pickling Cucumbers', 'Lemon Cucumbers', 'Zucchini', 'Green Zucchini', 'Yellow Zucchini', 'Round Zucchini', 'Yellow Squash', 'Crookneck Squash', 'Butternut Squash', 'Acorn Squash', 'Spaghetti Squash', 'Delicata Squash', 'Kabocha Squash', 'Hubbard Squash', 'Pumpkin', 'Sugar Pumpkins', 'Pie Pumpkins', 'Carving Pumpkins', 'Carrots', 'Orange Carrots', 'Baby Carrots', 'Rainbow Carrots', 'Purple Carrots', 'Yellow Carrots', 'White Carrots', 'Beets', 'Red Beets', 'Golden Beets', 'Chioggia Beets', 'Baby Beets', 'Radishes', 'Red Radishes', 'Daikon Radish', 'Watermelon Radish', 'French Breakfast Radish', 'Black Radish', 'Turnips', 'Purple Top Turnips', 'White Turnips', 'Rutabaga', 'Parsnips', 'Potatoes', 'Russet Potatoes', 'Red Potatoes', 'White Potatoes', 'Yukon Gold Potatoes', 'Fingerling Potatoes', 'Purple Potatoes', 'Blue Potatoes', 'New Potatoes', 'Sweet Potatoes', 'Orange Sweet Potatoes', 'Purple Sweet Potatoes', 'White Sweet Potatoes', 'Japanese Sweet Potatoes', 'Yams', 'Onions', 'Yellow Onions', 'Red Onions', 'White Onions', 'Sweet Onions', 'Vidalia Onions', 'Walla Walla Onions', 'Pearl Onions', 'Cipollini Onions', 'Shallots', 'French Shallots', 'Garlic', 'White Garlic', 'Purple Garlic', 'Elephant Garlic', 'Black Garlic', 'Green Garlic', 'Leeks', 'Baby Leeks', 'Green Onions', 'Scallions', 'Spring Onions', 'Chives', 'Garlic Chives', 'Chinese Chives', 'Celery', 'Pascal Celery', 'Celery Hearts', 'Celery Root', 'Celeriac', 'Asparagus', 'Green Asparagus', 'White Asparagus', 'Purple Asparagus', 'Wild Asparagus', 'Artichokes', 'Globe Artichokes', 'Baby Artichokes', 'Purple Artichokes', 'Eggplant', 'Globe Eggplant', 'Italian Eggplant', 'Japanese Eggplant', 'Chinese Eggplant', 'Thai Eggplant', 'White Eggplant', 'Okra', 'Green Okra', 'Red Okra', 'Green Beans', 'String Beans', 'Snap Beans', 'Yellow Wax Beans', 'Purple Beans', 'French Beans', 'Snap Peas', 'Sugar Snap Peas', 'Snow Peas', 'English Peas', 'Garden Peas', 'Edamame', 'Fresh Edamame', 'Fava Beans', 'Fresh Fava Beans', 'Lima Beans', 'Baby Lima Beans', 'Corn', 'Sweet Corn', 'Yellow Corn', 'White Corn', 'Bi-Color Corn', 'Baby Corn'] },
    
    { id: 'fruits', name: 'Fruits', nameEs: 'Frutas', icon: '🍎', color: '#ec4899', products: ['Apples', 'Fuji Apples', 'Gala Apples', 'Honeycrisp Apples', 'Granny Smith Apples', 'Red Delicious Apples', 'Golden Delicious Apples', 'Pink Lady Apples', 'Braeburn Apples', 'McIntosh Apples', 'Cosmic Crisp Apples', 'Jazz Apples', 'Envy Apples', 'Ambrosia Apples', 'Pears', 'Bartlett Pears', 'Anjou Pears', 'Bosc Pears', 'Comice Pears', 'Seckel Pears', 'Asian Pears', 'Forelle Pears', 'Oranges', 'Navel Oranges', 'Valencia Oranges', 'Cara Cara Oranges', 'Blood Oranges', 'Seville Oranges', 'Jaffa Oranges', 'Lemons', 'Eureka Lemons', 'Meyer Lemons', 'Lisbon Lemons', 'Ponderosa Lemons', 'Limes', 'Persian Limes', 'Key Limes', 'Kaffir Limes', 'Finger Limes', 'Sweet Limes', 'Grapefruit', 'Ruby Red Grapefruit', 'Pink Grapefruit', 'White Grapefruit', 'Oro Blanco Grapefruit', 'Tangerines', 'Dancy Tangerines', 'Honey Tangerines', 'Mandarins', 'Clementines', 'Satsuma Mandarins', 'Murcott Mandarins', 'Pixie Mandarins', 'Tangelos', 'Minneola Tangelos', 'Kumquats', 'Nagami Kumquats', 'Bananas', 'Cavendish Bananas', 'Red Bananas', 'Baby Bananas', 'Burro Bananas', 'Plantains', 'Green Plantains', 'Ripe Plantains', 'Mangoes', 'Ataulfo Mangoes', 'Tommy Atkins Mangoes', 'Kent Mangoes', 'Keitt Mangoes', 'Alphonso Mangoes', 'Francis Mangoes', 'Haden Mangoes', 'Papayas', 'Solo Papayas', 'Maradol Papayas', 'Red Papayas', 'Yellow Papayas', 'Green Papayas', 'Pineapples', 'Gold Pineapples', 'Queen Pineapples', 'Baby Pineapples', 'White Pineapples', 'Avocados', 'Hass Avocados', 'Fuerte Avocados', 'Reed Avocados', 'Bacon Avocados', 'Pinkerton Avocados', 'Zutano Avocados', 'Guavas', 'White Guavas', 'Pink Guavas', 'Strawberry Guavas', 'Pineapple Guavas', 'Passion Fruit', 'Yellow Passion Fruit', 'Purple Passion Fruit', 'Grapes', 'Red Grapes', 'Green Grapes', 'Black Grapes', 'Cotton Candy Grapes', 'Concord Grapes', 'Thompson Seedless', 'Flame Seedless', 'Crimson Seedless', 'Watermelon', 'Seedless Watermelon', 'Mini Watermelon', 'Yellow Watermelon', 'Orange Watermelon', 'Cantaloupe', 'Honeydew Melon', 'Casaba Melon', 'Canary Melon', 'Crenshaw Melon', 'Santa Claus Melon', 'Galia Melon', 'Peaches', 'Yellow Peaches', 'White Peaches', 'Donut Peaches', 'Clingstone Peaches', 'Freestone Peaches', 'Nectarines', 'Yellow Nectarines', 'White Nectarines', 'Plums', 'Black Plums', 'Red Plums', 'Yellow Plums', 'Damson Plums', 'Pluots', 'Apriums', 'Apricots', 'Blenheim Apricots', 'Moorpark Apricots', 'Cherries', 'Bing Cherries', 'Rainier Cherries', 'Queen Anne Cherries', 'Montmorency Cherries', 'Balaton Cherries', 'Figs', 'Black Mission Figs', 'Brown Turkey Figs', 'Kadota Figs', 'Calimyrna Figs', 'Adriatic Figs', 'Dates', 'Medjool Dates', 'Deglet Noor Dates', 'Barhi Dates', 'Zahidi Dates', 'Pomegranates', 'Wonderful Pomegranates', 'Eversweet Pomegranates', 'Kiwi', 'Green Kiwi', 'Gold Kiwi', 'Baby Kiwi', 'Red Kiwi', 'Dragon Fruit', 'White Dragon Fruit', 'Red Dragon Fruit', 'Yellow Dragon Fruit', 'Star Fruit', 'Lychee', 'Longan', 'Rambutan', 'Coconut', 'Young Coconuts', 'Mature Coconuts', 'Durian', 'Monthong Durian', 'Musang King Durian', 'Jackfruit', 'Fresh Jackfruit', 'Ripe Jackfruit', 'Persimmons', 'Fuyu Persimmons', 'Hachiya Persimmons'] },
    
    { id: 'berries', name: 'Berries Premium', nameEs: 'Bayas Premium', icon: '🫐', color: '#8b5cf6', products: ['Strawberries', 'Organic Strawberries', 'Conventional Strawberries', 'Albion Strawberries', 'Seascape Strawberries', 'Chandler Strawberries', 'Camarosa Strawberries', 'Festival Strawberries', 'Blueberries', 'Organic Blueberries', 'Conventional Blueberries', 'Wild Blueberries', 'Highbush Blueberries', 'Lowbush Blueberries', 'Duke Blueberries', 'Bluecrop Blueberries', 'Legacy Blueberries', 'Raspberries', 'Organic Raspberries', 'Red Raspberries', 'Black Raspberries', 'Golden Raspberries', 'Purple Raspberries', 'Heritage Raspberries', 'Caroline Raspberries', 'Blackberries', 'Organic Blackberries', 'Marion Blackberries', 'Triple Crown Blackberries', 'Thornless Blackberries', 'Ouachita Blackberries', 'Cranberries', 'Fresh Cranberries', 'Frozen Cranberries', 'Dried Cranberries', 'Cranberry Juice', 'Goji Berries', 'Dried Goji Berries', 'Fresh Goji Berries', 'Organic Goji Berries', 'Acai Berries', 'Frozen Acai', 'Acai Puree', 'Acai Powder', 'Acai Juice', 'Elderberries', 'Fresh Elderberries', 'Dried Elderberries', 'Elderberry Syrup', 'Mulberries', 'White Mulberries', 'Black Mulberries', 'Red Mulberries', 'Dried Mulberries', 'Gooseberries', 'Red Gooseberries', 'Green Gooseberries', 'Currants', 'Red Currants', 'Black Currants', 'White Currants', 'Pink Currants', 'Boysenberries', 'Fresh Boysenberries', 'Frozen Boysenberries', 'Loganberries', 'Fresh Loganberries', 'Marionberries', 'Fresh Marionberries', 'Frozen Marionberries', 'Huckleberries', 'Wild Huckleberries', 'Garden Huckleberries', 'Salmonberries', 'Cloudberries', 'Lingonberries', 'Bilberries'] },
    
    { id: 'juices', name: 'Juices & Beverages', nameEs: 'Jugos y Bebidas', icon: '🧃', color: '#06b6d4', products: ['Orange Juice', 'Fresh-Squeezed Orange Juice', 'Pulp-Free Orange Juice', 'Orange Juice with Pulp', 'Blood Orange Juice', 'Navel Orange Juice', 'Valencia Orange Juice', 'Apple Juice', 'Clear Apple Juice', 'Cloudy Apple Juice', 'Organic Apple Juice', 'Apple Cider', 'Hard Apple Cider', 'Grape Juice', 'White Grape Juice', 'Red Grape Juice', 'Concord Grape Juice', 'Organic Grape Juice', 'Cranberry Juice', 'Pure Cranberry Juice', 'Cranberry Juice Cocktail', 'Cranberry Blend', 'Pineapple Juice', 'Fresh Pineapple Juice', 'Canned Pineapple Juice', 'Organic Pineapple Juice', 'Grapefruit Juice', 'Ruby Red Grapefruit Juice', 'Pink Grapefruit Juice', 'White Grapefruit Juice', 'Lemon Juice', 'Fresh Lemon Juice', 'Bottled Lemon Juice', 'Organic Lemon Juice', 'Lime Juice', 'Fresh Lime Juice', 'Bottled Lime Juice', 'Key Lime Juice', 'Pomegranate Juice', 'Pure Pomegranate Juice', 'Pomegranate Blend', 'Organic Pomegranate Juice', 'Carrot Juice', 'Fresh Carrot Juice', 'Organic Carrot Juice', 'Beet Juice', 'Fresh Beet Juice', 'Organic Beet Juice', 'Celery Juice', 'Fresh Celery Juice', 'Cold-Pressed Celery Juice', 'Organic Celery Juice', 'Tomato Juice', 'Fresh Tomato Juice', 'Spiced Tomato Juice', 'V8 Vegetable Juice', 'Vegetable Juice Blends', 'Green Juice', 'Kale Green Juice', 'Spinach Green Juice', 'Detox Juice Blends', 'Cleanse Juice Blends', 'Smoothies', 'Berry Smoothies', 'Green Smoothies', 'Tropical Smoothies', 'Protein Smoothies', 'Meal Replacement Smoothies', 'Cold-Pressed Juices', 'HPP Juices', 'Organic Cold-Pressed Juices', 'Coconut Water', 'Pure Coconut Water', 'Coconut Water with Pulp', 'Flavored Coconut Water', 'Aloe Vera Juice', 'Pure Aloe Vera Juice', 'Aloe Vera Drinks', 'Mango Juice', 'Papaya Juice', 'Guava Juice', 'Passion Fruit Juice', 'Watermelon Juice', 'Cucumber Juice'] },
    
    { id: 'citrus', name: 'Citrus Fruits', nameEs: 'Cítricos', icon: '🍊', color: '#f59e0b', products: ['Oranges', 'Navel Oranges', 'Valencia Oranges', 'Cara Cara Oranges', 'Blood Oranges', 'Seville Oranges', 'Jaffa Oranges', 'Hamlin Oranges', 'Lemons', 'Eureka Lemons', 'Meyer Lemons', 'Lisbon Lemons', 'Ponderosa Lemons', 'Femminello Lemons', 'Limes', 'Persian Limes', 'Key Limes', 'Kaffir Limes', 'Finger Limes', 'Sweet Limes', 'Makrut Limes', 'Grapefruit', 'Ruby Red Grapefruit', 'Pink Grapefruit', 'White Grapefruit', 'Oro Blanco Grapefruit', 'Tangerines', 'Dancy Tangerines', 'Honey Tangerines', 'Sunburst Tangerines', 'Mandarins', 'Clementines', 'Satsuma Mandarins', 'Murcott Mandarins', 'Pixie Mandarins', 'Honey Mandarins', 'Tangelos', 'Minneola Tangelos', 'Orlando Tangelos', 'Kumquats', 'Nagami Kumquats', 'Meiwa Kumquats', 'Pomelos', 'Chandler Pomelos', 'Oroblanco Pomelos', 'Yuzu', 'Sudachi', 'Kabosu', 'Bergamot', 'Citron', 'Buddha Hand', 'Calamondin', 'Ugli Fruit'] },
    
    { id: 'nuts', name: 'Nuts & Seeds', nameEs: 'Nueces y Semillas', icon: '🥜', color: '#d97706', products: ['Almonds', 'Raw Almonds', 'Roasted Almonds', 'Salted Almonds', 'Smoked Almonds', 'Marcona Almonds', 'Almond Flour', 'Almond Meal', 'Almond Butter', 'Almond Milk', 'Sliced Almonds', 'Slivered Almonds', 'Walnuts', 'English Walnuts', 'Black Walnuts', 'Walnut Halves', 'Walnut Pieces', 'Chopped Walnuts', 'Pecans', 'Pecan Halves', 'Pecan Pieces', 'Candied Pecans', 'Roasted Pecans', 'Cashews', 'Raw Cashews', 'Roasted Cashews', 'Salted Cashews', 'Honey Roasted Cashews', 'Cashew Butter', 'Cashew Milk', 'Cashew Pieces', 'Pistachios', 'Shelled Pistachios', 'Roasted Pistachios', 'Salted Pistachios', 'Pistachio Paste', 'Pistachio Flour', 'Hazelnuts', 'Raw Hazelnuts', 'Roasted Hazelnuts', 'Blanched Hazelnuts', 'Hazelnut Flour', 'Hazelnut Butter', 'Hazelnut Paste', 'Macadamia Nuts', 'Raw Macadamias', 'Roasted Macadamias', 'Salted Macadamias', 'Macadamia Oil', 'Macadamia Butter', 'Brazil Nuts', 'Raw Brazil Nuts', 'Roasted Brazil Nuts', 'Pine Nuts', 'Italian Pine Nuts', 'Chinese Pine Nuts', 'Korean Pine Nuts', 'Chestnuts', 'Fresh Chestnuts', 'Roasted Chestnuts', 'Dried Chestnuts', 'Peeled Chestnuts', 'Peanuts', 'Raw Peanuts', 'Roasted Peanuts', 'Salted Peanuts', 'Peanut Butter', 'Crunchy Peanut Butter', 'Smooth Peanut Butter', 'Valencia Peanuts', 'Virginia Peanuts', 'Spanish Peanuts', 'Sunflower Seeds', 'Raw Sunflower Seeds', 'Roasted Sunflower Seeds', 'Salted Sunflower Seeds', 'Sunflower Seed Butter', 'Pumpkin Seeds', 'Raw Pumpkin Seeds', 'Roasted Pumpkin Seeds', 'Pepitas', 'Chia Seeds', 'Black Chia Seeds', 'White Chia Seeds', 'Flax Seeds', 'Brown Flax Seeds', 'Golden Flax Seeds', 'Ground Flaxseed', 'Sesame Seeds', 'White Sesame Seeds', 'Black Sesame Seeds', 'Toasted Sesame Seeds', 'Tahini', 'Hemp Seeds', 'Hemp Hearts', 'Hemp Protein', 'Poppy Seeds', 'Watermelon Seeds'] },
    
    { id: 'fertilizers', name: 'Fertilizers', nameEs: 'Fertilizantes', icon: '🧪', color: '#a855f7', products: ['Nitrogen Fertilizers', 'Urea 46-0-0', 'Ammonium Nitrate', 'Ammonium Sulfate', 'Calcium Ammonium Nitrate', 'UAN Solutions', 'Anhydrous Ammonia', 'Phosphate Fertilizers', 'Triple Superphosphate TSP', 'Single Superphosphate SSP', 'Diammonium Phosphate DAP', 'Monoammonium Phosphate MAP', 'Rock Phosphate', 'Bone Phosphate', 'Potassium Fertilizers', 'Muriate of Potash KCl', 'Sulfate of Potash K2SO4', 'Potassium Nitrate', 'Potassium Magnesium Sulfate', 'NPK Blends', '10-10-10 NPK', '20-20-20 NPK', '15-15-15 NPK', '5-10-5 NPK', '12-12-12 NPK', 'Custom NPK Blends', 'Organic Compost', 'Mushroom Compost', 'Leaf Compost', 'Food Waste Compost', 'Green Waste Compost', 'Vermicompost', 'Manure', 'Cow Manure', 'Horse Manure', 'Chicken Manure', 'Sheep Manure', 'Rabbit Manure', 'Bat Guano', 'Worm Castings', 'Bone Meal', 'Steamed Bone Meal', 'Raw Bone Meal', 'Fish Bone Meal', 'Blood Meal', 'Fish Blood Meal', 'Dried Blood', 'Fish Emulsion', 'Liquid Fish Fertilizer', 'Fish Hydrolysate', 'Fish Meal', 'Seaweed Extract', 'Liquid Kelp', 'Kelp Meal', 'Seaweed Powder', 'Ascophyllum Nodosum', 'Humic Acid', 'Potassium Humate', 'Sodium Humate', 'Leonardite', 'Fulvic Acid', 'Liquid Fulvic Acid', 'Mycorrhizae', 'Endo Mycorrhizae', 'Ecto Mycorrhizae', 'Mycorrhizal Inoculant', 'Biochar', 'Activated Biochar', 'Wood Biochar', 'Green Manure', 'Clover Green Manure', 'Vetch Green Manure', 'Liquid Fertilizers', 'Liquid NPK', 'Foliar Feed'] },
    
    { id: 'grains', name: 'Grains', nameEs: 'Granos', icon: '🌾', color: '#eab308', products: ['Wheat', 'Hard Red Wheat', 'Soft White Wheat', 'Durum Wheat', 'Corn', 'Yellow Corn', 'White Corn', 'Blue Corn', 'Rice', 'White Rice', 'Brown Rice', 'Basmati Rice', 'Jasmine Rice', 'Wild Rice', 'Barley', 'Oats', 'Rye', 'Millet', 'Sorghum', 'Quinoa', 'Amaranth', 'Buckwheat', 'Spelt', 'Farro', 'Bulgur', 'Couscous', 'Teff'] },
    { id: 'legumes', name: 'Legumes', nameEs: 'Legumbres', icon: '🫘', color: '#84cc16', products: ['Soybeans', 'Black Beans', 'Kidney Beans', 'Pinto Beans', 'Chickpeas', 'Lentils', 'Split Peas', 'Black-Eyed Peas', 'Lima Beans', 'Mung Beans'] },
    { id: 'herbs', name: 'Herbs', nameEs: 'Hierbas', icon: '🌿', color: '#22c55e', products: ['Basil', 'Oregano', 'Thyme', 'Rosemary', 'Sage', 'Parsley', 'Cilantro', 'Dill', 'Mint', 'Lavender', 'Bay Leaves', 'Chives', 'Turmeric', 'Ginger'] },
    { id: 'dairy', name: 'Dairy', nameEs: 'Lácteos', icon: '🥛', color: '#94a3b8', products: ['Milk', 'Cream', 'Butter', 'Cheese', 'Yogurt', 'Sour Cream', 'Ice Cream'] },
    { id: 'meat', name: 'Meat', nameEs: 'Carnes', icon: '🥩', color: '#ef4444', products: ['Beef', 'Pork', 'Lamb', 'Chicken', 'Turkey', 'Duck'] },
    { id: 'seafood', name: 'Seafood', nameEs: 'Mariscos', icon: '🐟', color: '#3b82f6', products: ['Salmon', 'Tuna', 'Cod', 'Shrimp', 'Crab', 'Lobster'] },
    { id: 'pesticides', name: 'Pesticides', nameEs: 'Pesticidas', icon: '🚫', color: '#dc2626', products: ['Glyphosate', 'Atrazine', 'Chlorpyrifos', 'Malathion', 'Organophosphates', 'Carbamates', 'Pyrethroids', 'Neonicotinoids'] },
    { id: 'oils', name: 'Oils', nameEs: 'Aceites', icon: '🫒', color: '#65a30d', products: ['Olive Oil', 'Coconut Oil', 'Avocado Oil', 'Canola Oil', 'Sunflower Oil'] },
    { id: 'sweeteners', name: 'Sweeteners', nameEs: 'Endulzantes', icon: '🍯', color: '#fbbf24', products: ['Cane Sugar', 'Honey', 'Maple Syrup', 'Agave', 'Stevia'] },
    { id: 'coffee', name: 'Coffee', nameEs: 'Café', icon: '☕', color: '#78350f', products: ['Arabica Coffee', 'Robusta Coffee', 'Green Coffee', 'Roasted Coffee'] },
    { id: 'processed', name: 'Processed', nameEs: 'Procesados', icon: '🥫', color: '#94a3b8', products: ['Canned Foods', 'Frozen Foods', 'Dried Foods', 'Snacks'] }
  ];

  const totalProducts = agCategories.reduce((sum, cat) => sum + cat.products.length, 0);

  const handleFileUpload = (e) => { const file = e.target.files[0]; if (file) { setUploadedFile(file); audioSystem.playSuccess(); } };
  const handleAddToCart = () => { if (!uploadedFile) { alert('Upload results'); return; } if (!selectedProduct) { alert('Select product'); return; } const category = agCategories.find(c => c.id === selectedCategory); addToCart({ id: 'AG-' + Date.now(), name: `${selectedProduct} Analysis`, price: 179, uploadedFile: uploadedFile.name, product: selectedProduct }); audioSystem.playSuccess(); navigate('/cart'); };

  if (!selectedCategory) {
    return (<div style={{ minHeight: '100vh', background: 'linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%)', padding: '2rem', color: '#fff' }}><div style={{ maxWidth: '1400px', margin: '0 auto' }}><h1 style={{ fontSize: '3rem', textAlign: 'center', color: '#10b981', marginBottom: '1rem' }}>🌾 AG Sciences</h1><p style={{ textAlign: 'center', color: '#b0bec5', marginBottom: '3rem' }}>Upload agricultural test results</p><div style={{ background: 'rgba(16, 185, 129, 0.15)', border: '2px solid #10b981', borderRadius: '20px', padding: '2rem', marginBottom: '3rem', textAlign: 'center' }}><div style={{ fontSize: '2.5rem', color: '#10b981', fontWeight: 'bold' }}>{totalProducts}+ Products</div><p style={{ color: '#b0bec5' }}>🤖 AI-Powered • 📊 Data-Driven</p></div><h2 style={{ fontSize: '2rem', textAlign: 'center', color: '#10b981', marginBottom: '2rem' }}>Select Category</h2><div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(280px, 1fr))', gap: '2rem', marginBottom: '2rem' }}>{agCategories.map(cat => (<div key={cat.id} onClick={() => { setSelectedCategory(cat.id); audioSystem.playClick(); }} style={{ background: `linear-gradient(135deg, ${cat.color}20 0%, ${cat.color}10 100%)`, border: `3px solid ${cat.color}`, borderRadius: '25px', padding: '2.5rem 2rem', cursor: 'pointer', textAlign: 'center' }} onMouseEnter={(e) => { e.currentTarget.style.transform = 'translateY(-10px)'; e.currentTarget.style.boxShadow = `0 20px 50px ${cat.color}60`; }} onMouseLeave={(e) => { e.currentTarget.style.transform = 'translateY(0)'; e.currentTarget.style.boxShadow = 'none'; }}><div style={{ fontSize: '4rem' }}>{cat.icon}</div><h3 style={{ fontSize: '1.5rem', color: '#fff', marginBottom: '1rem' }}>{cat.name}</h3><div style={{ fontSize: '2rem', color: cat.color, fontWeight: 'bold' }}>{cat.products.length}</div></div>))}</div><button onClick={() => navigate('/')} style={{ padding: '1rem 2rem', background: 'rgba(100, 116, 139, 0.3)', border: '2px solid #64748b', borderRadius: '12px', color: '#fff', cursor: 'pointer' }}>← Home</button></div></div>);
  }

  const category = agCategories.find(c => c.id === selectedCategory);
  if (!selectedProduct) {
    return (<div style={{ minHeight: '100vh', background: 'linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%)', padding: '2rem', color: '#fff' }}><div style={{ maxWidth: '1400px', margin: '0 auto' }}><button onClick={() => { setSelectedCategory(null); audioSystem.playClick(); }} style={{ padding: '1rem 2rem', background: 'rgba(100, 116, 139, 0.3)', border: '2px solid #64748b', borderRadius: '12px', color: '#fff', cursor: 'pointer', marginBottom: '2rem' }}>← Back</button><h1 style={{ fontSize: '3rem', textAlign: 'center', color: category.color, marginBottom: '3rem' }}>{category.icon} {category.name}</h1><p style={{ textAlign: 'center', color: '#b0bec5', marginBottom: '2rem' }}>{category.products.length} products</p><div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))', gap: '1.5rem' }}>{category.products.map(product => (<div key={product} onClick={() => { setSelectedProduct(product); audioSystem.playClick(); }} style={{ background: 'rgba(45, 55, 72, 0.9)', border: `2px solid ${category.color}40`, borderRadius: '15px', padding: '2rem 1.5rem', cursor: 'pointer', textAlign: 'center' }} onMouseEnter={(e) => { e.currentTarget.style.borderColor = category.color; }} onMouseLeave={(e) => { e.currentTarget.style.borderColor = `${category.color}40`; }}><h3 style={{ fontSize: '1.1rem', color: '#fff' }}>{product}</h3></div>))}</div></div></div>);
  }

  return (<div style={{ minHeight: '100vh', background: 'linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%)', padding: '2rem', color: '#fff' }}><div style={{ maxWidth: '1000px', margin: '0 auto' }}><button onClick={() => { setSelectedProduct(null); audioSystem.playClick(); }} style={{ padding: '1rem 2rem', background: 'rgba(100, 116, 139, 0.3)', border: '2px solid #64748b', borderRadius: '12px', color: '#fff', cursor: 'pointer', marginBottom: '2rem' }}>← Back</button><h1 style={{ fontSize: '2.5rem', textAlign: 'center', color: category.color, marginBottom: '3rem' }}>{category.icon} {selectedProduct}</h1><div style={{ background: 'rgba(45, 55, 72, 0.9)', padding: '3rem', borderRadius: '25px', border: `2px solid ${category.color}` }}><h2 style={{ fontSize: '2rem', color: category.color, marginBottom: '2rem', textAlign: 'center' }}>📤 Upload Results</h2><input type="file" id="fileUpload" onChange={handleFileUpload} accept=".pdf,.xlsx,.csv,image/*" style={{ display: 'none' }} /><button onClick={() => document.getElementById('fileUpload').click()} style={{ width: '100%', padding: '2rem', background: uploadedFile ? 'rgba(16, 185, 129, 0.3)' : `linear-gradient(135deg, ${category.color} 0%, ${category.color}CC 100%)`, border: uploadedFile ? '3px solid #10b981' : 'none', borderRadius: '15px', color: '#fff', fontWeight: 'bold', cursor: 'pointer', fontSize: '1.3rem', marginBottom: '2rem' }}>{uploadedFile ? `✅ ${uploadedFile.name}` : '📤 Select File'}</button>{uploadedFile && (<div style={{ textAlign: 'center' }}><div style={{ background: `${category.color}20`, padding: '2rem', borderRadius: '15px', border: `2px solid ${category.color}`, marginBottom: '2rem' }}><h3 style={{ fontSize: '1.5rem', color: category.color, marginBottom: '1rem' }}>📊 Analysis Includes:</h3><ul style={{ textAlign: 'left', maxWidth: '600px', margin: '0 auto', lineHeight: '2', listStyle: 'none', padding: 0 }}><li>✅ Quality assessment</li><li>✅ Contaminant detection</li><li>✅ Pesticide residue</li><li>✅ FDA/USDA/EU compliance</li><li>✅ AI recommendations</li><li>✅ QR tracking</li></ul></div><div style={{ display: 'flex', justifyContent: 'center', gap: '3rem', marginBottom: '2rem' }}><div><div style={{ fontSize: '3rem', color: category.color, fontWeight: 'bold' }}>$179</div><div>Complete</div></div><div style={{ fontSize: '2rem', color: '#64748b' }}>|</div><div><div style={{ fontSize: '2.5rem', color: '#10b981', fontWeight: 'bold' }}>24-48h</div><div>Turnaround</div></div></div><button onClick={handleAddToCart} style={{ padding: '1.5rem 4rem', background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)', border: 'none', borderRadius: '15px', color: '#fff', fontWeight: 'bold', cursor: 'pointer', fontSize: '1.5rem' }}>🛒 Add to Cart</button></div>)}</div></div></div>);
};

export default AGSciencesModule;