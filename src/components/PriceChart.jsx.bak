import React from "react";
import { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, ReferenceLine } from "recharts";

const weeks = Array.from({ length: 26 }, (_, i) => W);

export default function PriceChart({ series, average }) {
  const data = weeks.map((w, idx) => {
    const row = { week: w, avg: average[idx] ?? null };
    series.forEach(s => (row[s.name] = s.data[idx] ?? null));
    return row;
  });
  return (
    <div className="w-full h-[420px] bg-white rounded-2xl shadow p-4">
      <ResponsiveContainer width="100%" height="100%">
        <LineChart data={data}>
          <CartesianGrid strokeDasharray="3 3" />
          <XAxis dataKey="week" /><YAxis /><Tooltip /><Legend />
          {series.map(s => (<Line key={s.name} type="monotone" dataKey={s.name} dot={false} />))}
          <Line type="monotone" dataKey="avg" strokeDasharray="5 5" dot={false} />
          <ReferenceLine x="W26" strokeDasharray="3 3" />
        </LineChart>
      </ResponsiveContainer>
    </div>
  );
}